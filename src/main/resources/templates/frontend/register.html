<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>注册</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="注册页面">
  <meta name="description"
        content="注册页面">
  <link rel="shortcut icon" href="/static/img/favicon.ico" type="image/x-icon"/>
  <link rel="stylesheet" href="/static/layui/css/layui.css">
  <link rel="stylesheet" href="http://at.alicdn.com/t/font_693759_ask70l8wanw.css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css"/>
  <link rel="stylesheet" href="/static/css/register.css"/>
  <link rel="stylesheet" href="/static/css/nprogress.css">
</head>
<body bgcolor="#81D8D0">
<div class="login-box animated rotateIn">
  <div class="head"></div>
  <div style="color: white" align="center"><font size="5">平台注册</font></div>
  <div class="input-box">
    <form class="layui-form" action="">
      <input type="text" name="username" required lay-verify="required|user" placeholder="请输入11位学号"
             autocomplete="off" class="layui-input">
      <input type="password" name="password" required lay-verify="required|pwd" placeholder="请输入密码"
             autocomplete="off" class="layui-input">
      <input type="password" name="password" required lay-verify="required|rePwd"
             placeholder="请确认密码"
             autocomplete="off" class="layui-input">
      <input type="submit" value="注    册" lay-submit lay-filter="login">
    </form>
    <div style="margin-top: 10px">
      <a href="/login" style="color: white;margin-left: 160px;font-size: 11px">已有账号，立即登录&gt;&gt;</a>
    </div>
    <div class="oauth" align="center">
      <i class="layui-icon layui-icon-home" style="font-size: 25px;"></i>
    </div>
  </div>
  <div class="copyright" align="center" style="color: white">
    © 2019 Zbin. All Rights Reserved.
  </div>
</div>
<!--js逻辑-->
<script src="/static/layui/layui.js"></script>
<script src="/static/js/nprogress.js"></script>
<script>
  NProgress.start();
  window.onload = function () {
    NProgress.done();
  }
  layui.use(['form', 'jquery'], function () {
    var form = layui.form;
    var $ = layui.jquery;

    form.verify({
      user: function (value, item) {
        var Digital = /\d/;
        var Letters = /[a-zA-Z]/;
        if (!(Digital.test(value) && !Letters.test(value) && value.length == 11)) {
          return '账号只能为11位数字!';
        }
      },
      pwd: function (value, item) {
        var Digital = /\d/;
        var Letters = /[a-zA-Z]/;
        if (!(Digital.test(value) && Letters.test(value) && value.length >= 0)) {
          return '密码必须含有字母和数字!';
        }
      },
      rePwd: function (value, item) {
        var pwd = $("input[name='password']").val();
        if (pwd != value) {
          return '密码与确认密码不一致!';
        }

      }
    });

    //监听提交
    form.on('submit(login)', function (data) {
      $.ajax({
        url: '/doRegister'
        , type: 'post'
        , contentType: "application/json"
        , data: JSON.stringify(data.field)
        , success: function (result) {
          if (result.code == 0) {
            layer.msg('注册成功', {
              time: 2000, end: function () {
                location.href = '/login'
              }
            });
          } else {
            layer.msg(result.msg, {
              time: 1000
            });
            parent.layer.close();
          }
        }
      });
      return false;
    });

    $(".oauth .layui-icon-home").click(function () {
      window.location.href = "/index"
    });

  })
  ;
</script>
</body>
</html>